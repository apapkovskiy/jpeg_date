# JPEG Date Modifier

A Python script to modify the date in JPEG images by changing only the year and month while keeping the day and time unchanged. The script updates both EXIF metadata and file modification timestamps, and supports processing single files or entire folders.

> **Note**: This script was generated by AI (GitHub Copilot) to assist with batch JPEG date modification tasks.

## Features

- ✅ **Selective Date Modification**: Changes year and optionally month, preserves original day and time
- ✅ **Dual Update**: Updates both EXIF metadata and file system timestamps
- ✅ **Folder Processing**: Process entire directories with optional recursive scanning
- ✅ **Batch Operations**: Handle hundreds of photos at once
- ✅ **Dry Run Mode**: Preview changes before applying them
- ✅ **Flexible Output**: Overwrite originals or save to new locations
- ✅ **Progress Tracking**: Real-time progress indicators for batch operations
- ✅ **Error Handling**: Continues processing even if individual files fail
- ✅ **Multiple JPEG Formats**: Supports .jpg, .jpeg, .JPG, .JPEG extensions

## Installation

### Prerequisites

- Python 3.6 or higher
- pip (Python package installer)

### Install Dependencies

```bash
pip install -r requirements.txt
```

Or install manually:

```bash
pip install pillow piexif
```

## Usage

### Command Line Interface

#### Single File Processing

```bash
# Change photo date to July 2010, keeping original day and time
python jpeg_date.py photo.jpg 2010 7

# Change only the year to 2010, keeping original month, day and time
python jpeg_date.py photo.jpg 2010

# Save modified file to different location
python jpeg_date.py photo.jpg 2010 7 -o modified_photo.jpg

# Show current date without modifying
python jpeg_date.py photo.jpg 2010 7 --show-current
```

#### Folder Processing

```bash
# Process all JPEG files in current directory
python jpeg_date.py . 2010 7

# Process folder recursively (including subdirectories)
python jpeg_date.py ./vacation_photos 2023 12 --recursive

# Dry run to preview changes without modifying files
python jpeg_date.py ./photos 2023 12 --dry-run --recursive

# Save modified files to different folder
python jpeg_date.py ./original_photos 2010 7 -o ./modified_photos

# Show current dates in all photos
python jpeg_date.py ./photos 2023 12 --show-current --recursive
```

### Command Line Arguments

| Argument | Short | Description |
|----------|-------|-------------|
| `path` | - | Path to JPEG image or folder containing JPEG images |
| `new_year` | - | New year to set (e.g., 2023) |
| `new_month` | - | New month to set (1-12, optional - keeps original month if not specified) |
| `--output` | `-o` | Output path/folder (optional, overwrites original if not specified) |
| `--show-current` | `-s` | Show current datetime and exit |
| `--recursive` | `-r` | Process folders recursively |
| `--dry-run` | `-d` | Show what would be processed without making changes |

### Python API

You can also use the script functions directly in your Python code:

```python
from jpeg_date import modify_image_datetime, get_image_datetime, process_folder

# Single file processing
current_date = get_image_datetime("photo.jpg")
print(f"Current date: {current_date}")

# Change year and month
success = modify_image_datetime("photo.jpg", 2023, 12)
if success:
    print("Date modified successfully!")

# Change only year (keep original month)
success = modify_image_datetime("photo.jpg", 2023)
if success:
    print("Year changed successfully!")

# Folder processing
success_count, error_count, total_files = process_folder(
    "./photos", 2023, 12, 
    output_folder="./modified_photos", 
    recursive=True
)
```

## Examples

### Example 1: Single Photo
```bash
python jpeg_date.py IMG_1234.jpg 2010 7
```
**Result**: Changes the photo's date to July 2010, keeping the original day and time.

### Example 2: Change Only Year
```bash
python jpeg_date.py IMG_1234.jpg 2010
```
**Result**: Changes only the year to 2010, keeping the original month, day and time.

### Example 3: Vacation Photos Folder
```bash
python jpeg_date.py ./vacation_2023 2010 7 --recursive --dry-run
```
**Result**: Shows what changes would be made to all JPEG files in the vacation folder and its subdirectories.

### Example 4: Batch Processing with Backup
```bash
python jpeg_date.py ./old_photos 2010 7 -o ./corrected_photos --recursive
```
**Result**: Processes all photos recursively and saves corrected versions to a new folder.

## How It Works

1. **Date Extraction**: Reads current date from EXIF metadata or file modification time
2. **Selective Modification**: Creates new date with specified year/month, keeping original day/time
3. **EXIF Update**: Updates multiple EXIF date fields (DateTime, DateTimeOriginal, DateTimeDigitized)
4. **File Timestamp**: Updates the file system modification time to match
5. **Quality Preservation**: Saves JPEG with high quality (95%) to minimize compression artifacts

## File Structure

```
jpeg_date/
├── jpeg_date.py        # Main script
├── requirements.txt    # Python dependencies
├── example.py         # Usage examples
└── README.md          # This file
```

## Error Handling

The script includes comprehensive error handling:

- **Invalid file paths**: Validates file/folder existence
- **Non-JPEG files**: Checks file extensions and skips non-JPEG files
- **Corrupted images**: Continues processing other files if one fails
- **Permission errors**: Reports issues with file access
- **Invalid dates**: Validates year (1900-2100) and month (1-12) ranges

## Limitations

- **JPEG Only**: Currently supports only JPEG/JPG formats
- **Date Range**: Years must be between 1900-2100
- **EXIF Dependency**: Some very old or stripped JPEG files may not have EXIF data
- **Quality Loss**: Re-saving JPEG files may introduce minimal quality loss (mitigated by 95% quality setting)

## Troubleshooting

### Common Issues

1. **"No DateTime found in EXIF data"**
   - The image doesn't have EXIF date information
   - Script will fall back to using file modification time

2. **"piexif not installed"**
   - Install with: `pip install piexif`
   - Script will work with basic PIL functionality but piexif is more reliable

3. **Permission denied errors**
   - Check file/folder permissions
   - Ensure you have write access to the target location

### Debug Mode

Use the `--show-current` flag to inspect current dates without making changes:

```bash
python jpeg_date.py ./photos 2023 12 --show-current --recursive
```

## Dependencies

- **Pillow (PIL)**: Image processing and basic EXIF handling
- **piexif**: Advanced EXIF metadata manipulation (recommended)

## License

This script is provided as-is for educational and practical use. Generated by AI to assist with photo date management tasks.

## Contributing

Since this is an AI-generated utility script, feel free to modify and extend it for your specific needs. Common enhancements might include:

- Support for other image formats (TIFF, PNG with EXIF)
- GUI interface
- More granular time control
- Backup/restore functionality
- Batch undo operations

---

**Generated by**: AI (GitHub Copilot)  
**Purpose**: Batch JPEG date modification utility  
**Last Updated**: October 2025
